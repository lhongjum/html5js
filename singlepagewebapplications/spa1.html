<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SPA Chapter 1 section 1.2.2</title>
    <style type="text/css">
        body{
            width:100%;
            height:100%;
            overflow:hidden;
            background-color:#777;
        }
        #spa{
            position:absolute;
            top:8px;
            left:8px;
            bottom:8px;
            right:8px;
            border-radius: 8px 8px 0 8px;
            background-color:#fff;
        }
        .spa-slider{
            position:absolute;
            bottom:0;
            right:2px;
            width:300px;
            height:16px;
            cursor:pointer;
            border-radius: 8px 0 0 0;
            background-color:#f00;
        }
    </style>
    <script type="text/javascript" src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
    <script type="text/javascript">

        /*jslint       browser:true,continue:true,
        devel:true,indent:2,maxeer:50,
        newcap:true,nomen:true,plusplus:true,
        regexp:true,sloppy:true,vars:true,
        white:true
         */
        /*global jQuery*/


        var spa = (function($){
            var configMap = {
                extended_height:434,
                extend_title:'Click to retract',
                retracted_height:16,
                retracted_title:'Click to extend',
                template_html:'<div class="spa-slider"></div>'
                    },
                    $chatSlider,
                    toggleSlider,onClickSlider,initModule;

            toggleSlider = function(){
                var slider_height = $chatSlider.height();
                //展开聊天滑块
                if(slider_height === configMap.retracted_height){
                    $chatSlider.animate({height:configMap.extended_height})
                            .attr('title',configMap.extend_title);
                    return true;
                }
                //收起聊天滑块
                else if(slider_height === configMap.extended_height){
                    $chatSlider.animate({height:configMap.retracted_height})
                            .attr('title',configMap.retracted_title);
                    return true;
                }
                return false;
            };

            onClickSlider = function(event){
                toggleSlider();
                return false;
            };

            initModule = function($container){
                $container.html(configMap.template_html);
                $chatSlider = $container.find('.spa-slider');

                $chatSlider.attr('title',configMap.retracted_title)
                        .click(onClickSlider);
                return true;
            };
            //返回命名空间中的对象
            return {initModule:initModule};
        })(jQuery);

        jQuery(document).ready(
            function(){spa1.initModule(jQuery("#spa"));}
        );
    </script>
</head>
<body>
<div id="spa"></div>
</body>
</html>